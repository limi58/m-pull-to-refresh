!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.PullToRefresh=e()}(this,function(){"use strict";function t(t){this.distanceLimit=t.distanceLimit||500,this.distanceLoad=t.distanceLoad||60,this.contentEl=o(t.contentEl),this.loaderEl=o(t.loaderEl),this.wrapEl=o(t.wrapEl),this.pullDownText=t.pullDownText||"pull down",this.releaseText=t.releaseText||"release",this.loadingText=t.loadingText||"loading",this.pullSpeed=t.pullSpeed||.6,this.touchArea=t.touchArea||this.contentEl,this.releaseStayDistance=t.releaseStayDistance||40,this.loaderHeight=t.loaderHeight||40,this.loaderBg=t.loaderBg||"#f5f5f5",this.loaderColor=t.loaderColor||"#999",this.isOverRelease=!1,this.startY=0,this.isAtTop=!1,this.loaderEl.innerHTML=this.pullDownText,this.wrapEl.style.overflow="hidden"}function e(t,e,i){t.style.transform=t.style.webkitTransform=i?"translate3d(0, "+e+", 0)":"translate3d(0, "+e+"px, 0)"}function i(t){t.style.transition=t.style.webkitTransition="all 0.3s"}function n(t){t.style.transition=t.style.webkitTransition="none"}function s(){return document.documentElement.scrollTop||document.body.scrollTop}function o(t){return document.querySelector(t)}return t.prototype={onPull:function(t){var e=this.loaderHeight;this.loaderEl.setAttribute("style","\n      margin-top: -"+e+"px;height: "+e+"px;color: "+this.loaderColor+";\n      line-height: "+e+"px;text-align: center;background: "+this.loaderBg+";\n    "),this.touchArea.addEventListener("touchstart",this._handleContentTouchstart.bind(this)),this.touchArea.addEventListener("touchmove",this._handleContentTouchmove.bind(this)),this.touchArea.addEventListener("touchend",this._handleContentTouchend.bind(this)),this.loadFn=t},_handleContentTouchstart:function(t){s()>0?this.isAtTop=!1:this.isAtTop=!0,n(this.contentEl),n(this.loaderEl),this.startY=t.touches[0].pageY},_handleContentTouchmove:function(t){var i=t.touches[0].pageY-this.startY;!this.isAtTop||i<=0||(t.preventDefault(),i<this.distanceLimit&&(e(this.contentEl,i*this.pullSpeed),e(this.loaderEl,i*this.pullSpeed)),i>this.distanceLoad?(this.isOverRelease=!0,this.loaderEl.innerHTML=this.releaseText):(this.isOverRelease=!1,this.loaderEl.innerHTML=this.pullDownText))},_handleContentTouchend:function(){var t=this;this.isAtTop&&(i(this.contentEl),i(this.loaderEl),this.isOverRelease?(e(this.contentEl,this.releaseStayDistance),e(this.loaderEl,this.releaseStayDistance),this.loaderEl.innerHTML=this.loadingText,this.loadFn(function(){t._handleLoaded()})):(e(this.contentEl,0),e(this.loaderEl,"-100%",!0),this.loaderEl.innerHTML=this.pullDownText),this.isOverRelease=!1)},_handleLoaded:function(){e(this.contentEl,0),e(this.loaderEl,"-100%",!0),this.loaderEl.innerHTML=this.pullDownText}},t});
